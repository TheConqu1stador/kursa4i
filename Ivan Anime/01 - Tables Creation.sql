
CREATE TABLE "Двигатель" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Объем" VARCHAR(30),
	"Производитель" VARCHAR(30),
	"Модель" VARCHAR(50), 
	"Мощность" VARCHAR(30),
	"Тип" VARCHAR(30)
);

INSERT INTO public."Двигатель" ("Объем", "Производитель", "Модель", "Мощность", "Тип") VALUES 
	('4308 куб.см', 'Ferrari', 'F136', '510 л.с.', 'V-образный, 8-цилиндровый'),
	('2568 куб.см', 'Nissan', 'RB26DETT', '280 л.с.', '6-цилиндровый, 24-клапанный'),
	('1997 куб.см', 'Mitsubishi', '4G63T', '280 л.с.', 'Рядный, 4-цилиндровый'),
	('5576 куб.см', 'BMW', 'S70B56', '380 л.с.', 'V-образный, 12-цилиндровый'),
	('7011 куб.см', 'Chevrolet', 'GM LS7', '505 л.с.', 'V-образный, 8-цилиндровый'),
	('2995 куб.см', 'Audi', 'CAKA', '333 л.с.', 'V-образный, 6-цилиндровый'),
	('1308 куб.см', 'Mazda', '13B-REW', '280 л.с.', 'Духсекционный роторный'),
	('4999 куб.см', 'BMW', 'S85B50', '507 л.с.', 'V-образный, 10-цилиндровый'),
	('4163 куб.см', 'Audi', 'BNS', '450 л.с.', 'V-образный, 8-цилиндровый'),
	('2378 куб.см', 'Mitsubishi', '4G69', '165 л.с.', '4-цилиндровый, SOHC');


CREATE TABLE "КПП" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Тип коробки" VARCHAR(20), 
	"Кол-во передач" INT
);

INSERT INTO public."КПП" ("Тип коробки", "Кол-во передач") VALUES 
	('МКПП', 4),
	('МКПП', 5),
	('МКПП', 6),
	('АКПП', 4),
	('АКПП', 5),
	('АКПП', 6),
	('РКПП', 4),
	('РКПП', 5),
	('РКПП', 6),
	('РКПП', 7);


CREATE TABLE "Диски" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Производитель" VARCHAR(50), 
	"Модель" VARCHAR(30), 
	"Ширина" VARCHAR(30), 
	"Тип" VARCHAR(30)
);

INSERT INTO public."Диски" ("Производитель", "Модель", "Ширина", "Тип") VALUES 
	('Mak', 'Sarthe', '8x18/5x112', 'Литой'),
	('Replay', 'NS81', '6.5x16/5x114.3', 'Литой'),
	('Yamato', 'Akita', '6.5x16/5x114.3', 'Литой'),
	('Replay', 'Ki15', '6x15/5x114.3', 'Литой'),
	('Replay', 'B195', '8x18/5x112', 'Литой'),
	('mbDESIGN', 'MF1', '7.5x18/4x100', 'Литой'),
	('Replay', 'A44', '7.5x17/5x112', 'Литой'),
	('Replay', 'PR13', '9x20/5x112', 'Литой'),
	('LegeArtis', 'B121', '8x18/5x120', 'Литой'),
	('CrossStreet', 'CR14', '6xR15/4x100', 'Литой');

CREATE TABLE "Шины" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Модель" VARCHAR(40), 
	"Сезонность" VARCHAR(20), 
	"Производитель" VARCHAR(40)
);

INSERT INTO public."Шины" ("Модель", "Сезонность", "Производитель") VALUES 
	('Zovac HP W401', 'Летние', 'Hankook'),
	('Nord*Frost 200', 'Летние', 'Gislaved'),
	('Primacy 4', 'Летние', 'Michelin'),
	('Dynapro AT-m RF10', 'Летние', 'Hankook'),
	('Icepro 3 SUV', 'Зимние', 'GT Radial'),
	('SportContact 6', 'Летние', 'Continental'),
	('Winter I*cept Evo2 SUV W320A', 'Зимние', 'Hankook');

CREATE TABLE "Колесо" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Дисков" BIGINT,
	CONSTRAINT "ВК_Колесо_Диски" FOREIGN KEY("№ Дисков") REFERENCES "Диски"("№ п/п"),
	"№ Шин" BIGINT, 
	CONSTRAINT "ВК_Колесо_Шины" FOREIGN KEY("№ Шин") REFERENCES "Шины"("№ п/п"),
	"Диаметр" INT
);

INSERT INTO public."Колесо" ("№ Дисков", "№ Шин", "Диаметр") VALUES 
	(1, 4, 18),
	(2, 2, 16),
	(3, 2, 16),
	(4, 1, 15),
	(5, 5, 18),
	(6, 4, 18),
	(7, 3, 17),
	(8, 7, 20),
	(9, 4, 18),
	(10, 1, 15);

CREATE TABLE "Авто" ( 
	"Гос номер" VARCHAR(9) UNIQUE NOT NULL PRIMARY KEY,
	"Год выпуска" VARCHAR(12),
	"Марка" VARCHAR(40), 
	"Модель" VARCHAR(40), 
	"Страна пр." VARCHAR(40),
	"№ Двигателя" BIGINT,
	CONSTRAINT "FK_Авто_Двигатель" FOREIGN KEY("№ Двигателя") REFERENCES "Двигатель"("№ п/п"),
	"№ Колёс" BIGINT, 
	CONSTRAINT "ВК_Авто_Колесо" FOREIGN KEY("№ Колёс") REFERENCES "Колесо"("№ п/п"),
	"№ КПП" BIGINT,
	CONSTRAINT "ВК_Авто_КПП" FOREIGN KEY("№ КПП") REFERENCES "КПП"("№ п/п"),
	"Тип топлива" VARCHAR(10),
	"Категория" VARCHAR(20),
	"Эко класс" VARCHAR(20)
);

INSERT INTO public."Авто" ("Гос номер", "Год выпуска", "Марка", "Модель", "Страна пр.", "№ Двигателя", "№ Колёс", "№ КПП", "Тип топлива", "Категория", "Эко класс") VALUES 
	('У369НС', '2009', 'Ferrari', 'F430', 'Италия', 1, 1, 3, 'Бензин', 'АИ-98', '4-й класс'),
	('Р259ВС', '2002', 'Nissan', 'Skyline GT-R', 'Япония', 2, 4, 3, 'Бензин', 'АИ-95', '2-й класс'),
	('М411ЖА', '2005', 'Mitsubishi', 'Airtrek 2.0 Turbo R', 'Япония', 3, 2, 5, 'Бензин', 'АИ-95', '3-й класс'),
	('Н451ХМ', '1996', 'BMW', '8-Series 850CSi MT', 'Германия', 4, 3, 3,'Бензин', 'АИ-98', '1-й класс'),
	('Е275ТС', '2015', 'Chevrolet', 'Camaro 7.0 MT Z/28', 'Канада', 5, 5, 6, 'Бензин', 'АИ-95', '4-й класс'),
	('С364ТО', '2016', 'Audi', 'S4 3.0 TFSI quattro S tronic', 'Германия', 6, 6, 10, 'Бензин', 'АИ-95', '5-й класс'),
	('Р199ВН', '2002', 'Mazda', 'Type R Bathurst', 'Япония', 7, 7, 2, 'Бензин', 'АИ-95', '2-й класс'),
	('Н393КС', '2010', 'BMW', 'M6 5.0 AMT', 'Германия', 8, 8, 10, 'Бензин', 'АИ-95', '3-й класс'),
	('Х202КВ', '2016', 'Audi', 'RS4 4.2 FSI quattro S tronic', 'Германия', 9, 9, 10, 'Бензин', 'АИ-95', '5-й класс'),
	('Е651МА', '2005', 'Mitsubishi', 'Airtrek 2.4 Sport Gear S', 'Япония', 10, 2, 4, 'Бензин', 'АИ-95', '3-й класс');

CREATE TABLE "ПТС" ( 
	"№ ПТС" VARCHAR(40) UNIQUE NOT NULL PRIMARY KEY,
	"Кол. владельцев" VARCHAR(9),
	"Компания производитель" VARCHAR(40),
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_ПТС_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер")
);

INSERT INTO public."ПТС" ("№ ПТС", "Кол. владельцев", "Компания производитель", "Номер авто") VALUES 
	('WV5UX4AQ5Z5MESC', '0', 'Ferrari', 'У369НС'),
	('47RE0EKN1HGPXM8', '0', 'Nissan', 'Р259ВС'),
	('ETNYLEUI8MV7IEA', '1', 'Mitsubishi', 'М411ЖА'),
	('H03YXNRQN6BHEUV', '1', 'BMW', 'Н451ХМ'),
	('5NM03K3I5IJCR75', '0', 'Chevrolet', 'Е275ТС'),
	('KYWJ4XNFR5KXM0R', '1', 'Audi', 'С364ТО'),
	('IO9KVUIKJESVQEQ', '0', 'Mazda', 'Р199ВН'),
	('5P53L8MX23H7Z8G', '0', 'BMW', 'Н393КС'),
	('RFOQ1PXJE78Z3RZ', '0', 'Audi', 'Х202КВ'),
	('F891P8KPW7SR892', '2', 'Mitsubishi', 'Е651МА');


CREATE TABLE "Записи ПТС" ( 
	"№ Записи" VARCHAR(20) UNIQUE NOT NULL PRIMARY KEY,
	"№ ПТС" VARCHAR(40),
	CONSTRAINT "ВК_Записи ПТС_ПТС" FOREIGN KEY("№ ПТС") REFERENCES "ПТС"("№ ПТС"),
	"Дата покупки" TIMESTAMP DEFAULT clock_timestamp(),
	"Дата продажи" TIMESTAMP DEFAULT clock_timestamp(),
	"Фамилия" VARCHAR(40),
	"Имя" VARCHAR(40),
	"Отчество" VARCHAR(40)
);

INSERT INTO public."Записи ПТС" ("№ Записи", "№ ПТС", "Дата покупки", "Дата продажи", "Фамилия", "Имя", "Отчество") VALUES 
	('1', 'ETNYLEUI8MV7IEA', '2006-02-24', null, 'Смирнова', 'Валерия', 'Игоревна'),
	('2', 'H03YXNRQN6BHEUV', '1999-11-01', null, 'Горшков', 'Адам', 'Данилович'),
	('3', 'KYWJ4XNFR5KXM0R', '2016-07-11', null, 'Иванов', 'Арсений', 'Сергеевич'),
	('4', 'F891P8KPW7SR892', '2006-07-18', '2011-06-03', 'Ефремов', 'Артём', 'Иванович'),
	('5', 'F891P8KPW7SR892', '2011-06-03', null, 'Яковлева', 'Мира', 'Александровна');

CREATE TABLE "Переч. Штрафов" ( 
	"№ в ГИБДД" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Дата" TIMESTAMP, 
	"Сумма" INT,
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_Переч. Штрафов_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер")
);

INSERT INTO public."Переч. Штрафов" ("Дата", "Сумма", "Номер авто") VALUES 
	('2001-11-29 15:05', 1000, 'Н451ХМ'),
	('2015-04-18 19:36', 5000, 'Н451ХМ'),
	('2007-08-20 09:15', 2000, 'Н451ХМ'),
	('2008-09-04 08:40', 1500, 'М411ЖА'),
	('2017-08-04 18:58', 1700, 'М411ЖА'),
	('2018-10-25 10:32', 2500, 'С364ТО'),
	('2020-12-16 04:52', 500, 'С364ТО'),
	('2011-02-18 00:54', 5000, 'Е651МА'),
	('2011-11-22 04:58', 3000, 'Е651МА'),
	('2012-07-15 01:45', 1000, 'Е651МА');

CREATE TABLE "СТС" ( 
	"№ СТС" VARCHAR(40) UNIQUE NOT NULL PRIMARY KEY,
	"Вес ТС" INT, 
	"VIN номер" INT, 
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_СТС_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер"),
	"Номер двигателя" BIGINT, 
	"Номера кузова" INT, 
	"Номера шасси" INT, 
	"Цвет кузова" VARCHAR(20)
);

INSERT INTO public."СТС" ("№ СТС", "Вес ТС", "VIN номер", "Номер авто", "Номер двигателя", "Номера кузова", "Номера шасси" , "Цвет кузова") VALUES 
	('7819512974', 1700 , '34128530', 'У369НС', '625620', '24718790', '345494151', 'Красный'),
	('0173074645', 1350 , '51457209', 'Р259ВС', '342102', '89323416', '746434652', 'Чёрный'),
	('6386230905', 1520 , '78906186', 'М411ЖА', '754378', '28903472', '093808012', 'Чёрный'),
	('7625964843', 1790 , '76797961', 'Н451ХМ', '213176', '17161265', '527323461', 'Чёрный'),
	('8356234602', 1730 , '34129146', 'Е275ТС', '301709', '10901751', '397282436', 'Серый'),
	('2362343426', 1780 , '63636720', 'С364ТО', '212805', '21538714', '587310842', 'Синий'),
	('0451501636', 1260 , '38612408', 'Р199ВН', '070670', '04021927', '253502983', 'Жёлтый'),
	('3908923846', 1785 , '12695871', 'Н393КС', '295690', '20768123', '012964580', 'Чёрный'),
	('8782349472', 1750 , '31915261', 'Х202КВ', '734120', '92380934', '576827491', 'Белый'),
	('4841674572', 1500 , '75356051', 'Е651МА', '697457', '36489560', '626854516', 'Чёрный');


CREATE TABLE "Бухгалтер" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Имя" VARCHAR(40),
	"Фамилия" VARCHAR(40),
	"Отчество" VARCHAR(40)
);

INSERT INTO public."Бухгалтер" ("Имя", "Фамилия", "Отчество") VALUES 
	('Воробьева', 'Елизавета', 'Леоновна'),
	('Власова','Софья', 'Артуровна'),
	('Андреева', 'Виктория', 'Дмитриевна');


CREATE TABLE "Паспорт" ( 
	"Код паспорта" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Номер" INT,
	"Серия" INT, 
	"Кем выдан" VARCHAR(100), 
	"Дата выдачи" TIMESTAMP
);

INSERT INTO public."Паспорт" ("Номер", "Серия", "Кем выдан", "Дата выдачи") VALUES 
	(8525, 048010, 'Управление по вопросам миграции ГУ МВД России по г. Москве', '2009-07-13'),
	(6390, 194301, 'Управление по вопросам миграции ГУ МВД России по г. Москве', '2006-09-25'),
	(9090, 586437, 'УВМ ГУ МВД России по Московской области', '2001-12-13'),
	(8410, 497810, 'Отделение УВМ России по г. Москве по району Южнопортовый', '2008-03-24'),
	(9354, 361976, 'Отдел по вопросам миграции ОМВД России по району Северное Измайлово г. Москвы', '2002-06-03'),
	(1583, 465079, 'Территориальное подразделение Управления по вопросам миграции ГУ МВД России по городу Москве', '2006-01-18'),
	(6462, 101913, 'Управление по вопросам миграции МВД России', '2000-03-10'),
	(7016, 019784, 'Отдел по вопросам миграции УВД по ВАО ГУ МВД России по г. Москве', '2004-06-18');

---------------------------------------------------------------------------------
CREATE TABLE "Продавец" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Фамилия" VARCHAR(40), 
	"Имя" VARCHAR(40),
	"Отчество" VARCHAR(40),
	"ИНН" INT,
	"Паспорт" BIGINT,
	CONSTRAINT "ВК_Продавец_Паспорт" FOREIGN KEY("Паспорт") REFERENCES "Паспорт"("Код паспорта")
);

CREATE TABLE "Эксперт" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Фамилия" VARCHAR(40), 
	"Имя" VARCHAR(40),
	"Отчество" VARCHAR(40),
	"ИНН" INT,
	"Паспорт" BIGINT,
	CONSTRAINT "ВК_Эксперт_Паспорт" FOREIGN KEY("Паспорт") REFERENCES "Паспорт"("Код паспорта"), 
	"КПП" BIGINT, 
	"ОКПО" INT
);

CREATE TABLE "Оператор" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Имя" VARCHAR(40), 
	"Фамилия" VARCHAR(40), 
	"Отчество" VARCHAR(40), 
	"ИНН" VARCHAR(40)
);

CREATE TABLE "Доверенность" ( 
	"№ Доверенности" VARCHAR(30) UNIQUE NOT NULL PRIMARY KEY,
	"Дата выдачи" TIMESTAMP, 
	"№ Сотрудника" BIGINT,
	CONSTRAINT "ВК_Доверенность_Эксперт" FOREIGN KEY("№ Сотрудника") REFERENCES "Эксперт"("№ Сотрудника"),
	"Срок действия" INT
);

CREATE TABLE "Дов-сть авто" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ автомобиля" VARCHAR(9),
	"Дата выдачи" TIMESTAMP, 
	"Кем выдана" BIGINT,
	CONSTRAINT "ВК_Дов-ть авто_Продавец" FOREIGN KEY("Кем выдана") REFERENCES "Продавец"("№ п/п"),
	"Срок действия" INT
);

CREATE TABLE "Заявка" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Оператора" BIGINT,
	CONSTRAINT "ВК_Заявка_Оператор" FOREIGN KEY("№ Оператора") REFERENCES "Оператор"("№ Сотрудника"),
	"Эксперт" BIGINT,
	CONSTRAINT "ВК_Заявка_Эксперт" FOREIGN KEY("Эксперт") REFERENCES "Эксперт"("№ Сотрудника"),
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_Заявка_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер"),
	"Телефон" VARCHAR(17)
);

CREATE TABLE "Контакты" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	CONSTRAINT "ВК_Контакты_Эксперт" FOREIGN KEY("№ Сотрудника") REFERENCES "Эксперт"("№ Сотрудника"),
	"Email" VARCHAR(40),
	"Мобильный телефон" VARCHAR(17),
	"Корпоративный телефон" VARCHAR(17)
);

CREATE TABLE "Координаты" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	CONSTRAINT "ВК_Координаты_Продавец" FOREIGN KEY("№ п/п") REFERENCES "Продавец"("№ п/п"),
	"Email" VARCHAR(40), 
	"Мобильный телефон" VARCHAR(17), 
	"Город" VARCHAR(100), 
	"Улица" VARCHAR(100), 
	"Дом" INT,
	"Квартира" INT
);

CREATE TABLE "Налог.Дек." ( 
	"№ Декларации" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"КПП" VARCHAR(30), 
	"Доход" INT, 
	"Налог" VARCHAR(10), 
	"ОГРН" VARCHAR(13), 
	"ОГРНИП" VARCHAR(15), 
	"Период" VARCHAR(10), 
	"Составляющий" BIGINT,
	CONSTRAINT "ВК_Налог.Дек._Бухгалтер" FOREIGN KEY("Составляющий") REFERENCES "Бухгалтер"("№ Сотрудника"),
	"Сумма" INT
);

CREATE TABLE "РПДС" (                 -- Расписка о получении денежных средств
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Кому выдан" BIGINT,
	CONSTRAINT "ВК_РПДС_Продавец" FOREIGN KEY("Кому выдан") REFERENCES "Продавец"("№ п/п"),
	"Сумма" INT
);

CREATE TABLE "Счет-фактура" ( 
	"№ Счета-фактуры" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Сотрудника" INT, 
	CONSTRAINT "ВК_Счет-фактура_Бухгалтер" FOREIGN KEY("№ Сотрудника") REFERENCES "Бухгалтер"("№ Сотрудника"),
	"ИНН" INT,
	"КПП" BIGINT, 
	"Налог" INT, 
	"Сумма документа" INT
);

CREATE TABLE "Договор" (
	"№ Договора" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Доверенности" VARCHAR(30),
	CONSTRAINT "ВК_Договор_Доверенность" FOREIGN KEY("№ Доверенности") REFERENCES "Доверенность"("№ Доверенности"),
	"№ Продавца" BIGINT,
	CONSTRAINT "ВК_Договор_Продавец" FOREIGN KEY("№ Продавца") REFERENCES "Продавец"("№ п/п"),
	"№ Сотрудника" BIGINT, 
	CONSTRAINT "ВК_Договор_Эксперт" FOREIGN KEY("№ Сотрудника") REFERENCES "Эксперт"("№ Сотрудника"),
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_Договор_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер"),
	"Бухгалтер" BIGINT, 
	CONSTRAINT "ВК_Договор_Бухгалтер" FOREIGN KEY("Бухгалтер") REFERENCES "Бухгалтер"("№ Сотрудника"),
	"ПТС" VARCHAR(40),
	CONSTRAINT "ВК_Договор_ПТС" FOREIGN KEY("ПТС") REFERENCES "ПТС"("№ ПТС"),
	"СТС" VARCHAR(40),
	CONSTRAINT "ВК_Договор_СТС" FOREIGN KEY("СТС") REFERENCES "СТС"("№ СТС"),
	"Дата сделки" TIMESTAMP
);