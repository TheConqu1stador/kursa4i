
CREATE TABLE "Двигатель" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Объем" VARCHAR(30),
	"Производитель" VARCHAR(30),
	"Модель" VARCHAR(50), 
	"Мощность" VARCHAR(30),
	"Тип" VARCHAR(30)
);

CREATE TABLE "КПП" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Тип коробки" VARCHAR(20), 
	"Кол-во передач" INT
);

CREATE TABLE "Диски" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Производитель" VARCHAR(50), 
	"Модель" VARCHAR(30), 
	"Ширина" VARCHAR(30), 
	"Тип" VARCHAR(30)
);

CREATE TABLE "Шины" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Модель" VARCHAR(40), 
	"Сезонность" VARCHAR(20), 
	"Производитель" VARCHAR(40)
);

CREATE TABLE "Колесо" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Дисков" BIGINT,
	CONSTRAINT "ВК_Колесо_Диски" FOREIGN KEY("№ Дисков") REFERENCES "Диски"("№ п/п"),
	"№ Шин" BIGINT, 
	CONSTRAINT "ВК_Колесо_Шины" FOREIGN KEY("№ Шин") REFERENCES "Шины"("№ п/п"),
	"Диаметр" INT
);

CREATE TABLE "Авто" ( 
	"Гос номер" VARCHAR(9) UNIQUE NOT NULL PRIMARY KEY,
	"Год выпуска" VARCHAR(12),
	"Марка" VARCHAR(40), 
	"Модель" VARCHAR(40), 
	"Страна пр." VARCHAR(40),
	"№ Двигателя" BIGINT,
	CONSTRAINT "FK_Авто_Двигатель" FOREIGN KEY("№ Двигателя") REFERENCES "Двигатель"("№ п/п"),
	"№ Колёс" BIGINT, 
	CONSTRAINT "ВК_Авто_Колесо" FOREIGN KEY("№ Колёс") REFERENCES "Колесо"("№ п/п"),
	"№ КПП" BIGINT,
	CONSTRAINT "ВК_Авто_КПП" FOREIGN KEY("№ КПП") REFERENCES "КПП"("№ п/п"),
	"Тип топлива" VARCHAR(10),
	"Категория" VARCHAR(20),
	"Эко класс" VARCHAR(20)
);

CREATE TABLE "ПТС" ( 
	"№ ПТС" VARCHAR(40) UNIQUE NOT NULL PRIMARY KEY,
	"Кол. владельцев" VARCHAR(9),
	"Компания производитель" VARCHAR(40),
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_ПТС_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер")
);

CREATE TABLE "Записи ПТС" ( 
	"№ Записи" VARCHAR(20) UNIQUE NOT NULL PRIMARY KEY,
	"№ ПТС" VARCHAR(40),
	CONSTRAINT "ВК_Записи ПТС_ПТС" FOREIGN KEY("№ ПТС") REFERENCES "ПТС"("№ ПТС"),
	"Дата покупки" TIMESTAMP DEFAULT clock_timestamp(),
	"Дата продажи" TIMESTAMP DEFAULT clock_timestamp(),
	"Фамилия" VARCHAR(40),
	"Имя" VARCHAR(40),
	"Отчество" VARCHAR(40)
);

 

CREATE TABLE "Переч. Штрафов" ( 
	"№ в ГИБДД" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Дата" TIMESTAMP, 
	"Сумма" INT,
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_Переч. Штрафов_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер")
);

CREATE TABLE "СТС" ( 
	"№ СТС" VARCHAR(40) UNIQUE NOT NULL PRIMARY KEY,
	"Вес ТС" INT, 
	"VIN номер" INT, 
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_СТС_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер"),
	"Номер двигателя" BIGINT, 
	"Номера кузова" INT, 
	"Номера шасси" INT, 
	"Цвет кузова" VARCHAR(20)
);

CREATE TABLE "Бухгалтер" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Имя" VARCHAR(40),
	"Фамилия" VARCHAR(40),
	"Отчество" VARCHAR(40)
);

CREATE TABLE "Паспорт" ( 
	"Код паспорта" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Номер" INT,
	"Серия" INT, 
	"Кем выдан" VARCHAR(100), 
	"Дата выдачи" TIMESTAMP
);

CREATE TABLE "Продавец" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Фамилия" VARCHAR(40), 
	"Имя" VARCHAR(40),
	"Отчество" VARCHAR(40),
	"ИНН" INT,
	"Паспорт" BIGINT,
	CONSTRAINT "ВК_Продавец_Паспорт" FOREIGN KEY("Паспорт") REFERENCES "Паспорт"("Код паспорта")
);

CREATE TABLE "Эксперт" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Фамилия" VARCHAR(40), 
	"Имя" VARCHAR(40),
	"Отчество" VARCHAR(40),
	"ИНН" INT,
	"Паспорт" BIGINT,
	CONSTRAINT "ВК_Эксперт_Паспорт" FOREIGN KEY("Паспорт") REFERENCES "Паспорт"("Код паспорта"), 
	"КПП" BIGINT, 
	"ОКПО" INT
);

CREATE TABLE "Оператор" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Имя" VARCHAR(40), 
	"Фамилия" VARCHAR(40), 
	"Отчество" VARCHAR(40), 
	"ИНН" VARCHAR(40)
);

CREATE TABLE "Доверенность" ( 
	"№ Доверенности" VARCHAR(30) UNIQUE NOT NULL PRIMARY KEY,
	"Дата выдачи" TIMESTAMP, 
	"№ Сотрудника" BIGINT,
	CONSTRAINT "ВК_Доверенность_Эксперт" FOREIGN KEY("№ Сотрудника") REFERENCES "Эксперт"("№ Сотрудника"),
	"Срок действия" INT
);

CREATE TABLE "Дов-сть авто" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ автомобиля" VARCHAR(9),
	"Дата выдачи" TIMESTAMP, 
	"Кем выдана" BIGINT,
	CONSTRAINT "ВК_Дов-ть авто_Продавец" FOREIGN KEY("Кем выдана") REFERENCES "Продавец"("№ п/п"),
	"Срок действия" INT
);

CREATE TABLE "Заявка" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Оператора" BIGINT,
	CONSTRAINT "ВК_Заявка_Оператор" FOREIGN KEY("№ Оператора") REFERENCES "Оператор"("№ Сотрудника"),
	"Эксперт" BIGINT,
	CONSTRAINT "ВК_Заявка_Эксперт" FOREIGN KEY("Эксперт") REFERENCES "Эксперт"("№ Сотрудника"),
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_Заявка_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер"),
	"Телефон" VARCHAR(17)
);

CREATE TABLE "Контакты" ( 
	"№ Сотрудника" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	CONSTRAINT "ВК_Контакты_Эксперт" FOREIGN KEY("№ Сотрудника") REFERENCES "Эксперт"("№ Сотрудника"),
	"Email" VARCHAR(40),
	"Мобильный телефон" VARCHAR(17),
	"Корпоративный телефон" VARCHAR(17)
);

CREATE TABLE "Координаты" ( 
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	CONSTRAINT "ВК_Координаты_Продавец" FOREIGN KEY("№ п/п") REFERENCES "Продавец"("№ п/п"),
	"Email" VARCHAR(40), 
	"Мобильный телефон" VARCHAR(17), 
	"Город" VARCHAR(100), 
	"Улица" VARCHAR(100), 
	"Дом" INT,
	"Квартира" INT
);

CREATE TABLE "Налог.Дек." ( 
	"№ Декларации" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"КПП" VARCHAR(30), 
	"Доход" INT, 
	"Налог" VARCHAR(10), 
	"ОГРН" VARCHAR(13), 
	"ОГРНИП" VARCHAR(15), 
	"Период" VARCHAR(10), 
	"Составляющий" BIGINT,
	CONSTRAINT "ВК_Налог.Дек._Бухгалтер" FOREIGN KEY("Составляющий") REFERENCES "Бухгалтер"("№ Сотрудника"),
	"Сумма" INT
);

CREATE TABLE "РПДС" (                 -- Расписка о получении денежных средств
	"№ п/п" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"Кому выдан" BIGINT,
	CONSTRAINT "ВК_РПДС_Продавец" FOREIGN KEY("Кому выдан") REFERENCES "Продавец"("№ п/п"),
	"Сумма" INT
);

CREATE TABLE "Счет-фактура" ( 
	"№ Счета-фактуры" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Сотрудника" INT, 
	CONSTRAINT "ВК_Счет-фактура_Бухгалтер" FOREIGN KEY("№ Сотрудника") REFERENCES "Бухгалтер"("№ Сотрудника"),
	"ИНН" INT,
	"КПП" BIGINT, 
	"Налог" INT, 
	"Сумма документа" INT
);

CREATE TABLE "Договор" (
	"№ Договора" BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
	"№ Доверенности" VARCHAR(30),
	CONSTRAINT "ВК_Договор_Доверенность" FOREIGN KEY("№ Доверенности") REFERENCES "Доверенность"("№ Доверенности"),
	"№ Продавца" BIGINT,
	CONSTRAINT "ВК_Договор_Продавец" FOREIGN KEY("№ Продавца") REFERENCES "Продавец"("№ п/п"),
	"№ Сотрудника" BIGINT, 
	CONSTRAINT "ВК_Договор_Эксперт" FOREIGN KEY("№ Сотрудника") REFERENCES "Эксперт"("№ Сотрудника"),
	"Номер авто" VARCHAR(9),
	CONSTRAINT "ВК_Договор_Авто" FOREIGN KEY("Номер авто") REFERENCES "Авто"("Гос номер"),
	"ПТС" VARCHAR(40),
	CONSTRAINT "ВК_Договор_ПТС" FOREIGN KEY("ПТС") REFERENCES "ПТС"("№ ПТС"),
	"СТС" VARCHAR(40),
	CONSTRAINT "ВК_Договор_СТС" FOREIGN KEY("СТС") REFERENCES "СТС"("№ СТС"),
	"Дата сделки" TIMESTAMP
);